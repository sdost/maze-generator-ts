!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var t=Object.defineProperty,e=(e,i,s)=>((e,i,s)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s)(e,"symbol"!=typeof i?i+"":i,s);class i{constructor(t,i){this._position=t,e(this,"_walls"),e(this,"_visited",!1),this._walls=new Array(i).fill(!0)}get position(){return this._position}get walls(){return this._walls}get visited(){return this._visited}set visited(t){this._visited=t}removeWall(t){t>=0&&t<this._walls.length&&(this._walls[t]=!1)}hasWall(t){return t>=0&&t<this._walls.length&&this._walls[t]}equals(t){return this._position.x===t._position.x&&this._position.y===t._position.y}toString(){return`Cell(${this._position.x}, ${this._position.y})`}}var s=Object.defineProperty,n=(t=>(t[t.Top=0]="Top",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left",t))(n||{});const l=class t extends i{constructor(e){super(e,t.WALL_COUNT)}removeWall(t){super.removeWall(t)}hasWall(t){return super.hasWall(t)}getNeighborPosition(t){const{x:e,y:i}=this.position;switch(t){case 0:return{x:e,y:i-1};case 1:return{x:e+1,y:i};case 2:return{x:e,y:i+1};case 3:return{x:e-1,y:i};default:throw new Error(`Invalid wall direction: ${t}`)}}static getOppositeWall(t){switch(t){case 0:return 2;case 1:return 3;case 2:return 0;case 3:return 1;default:throw new Error(`Invalid wall direction: ${t}`)}}};((t,e,i)=>{e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(l,"WALL_COUNT"+"",4);let r=l;var a=Object.defineProperty,h=(t,e,i)=>((t,e,i)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);const o=class t{constructor(t,e){this.cellA=t,this.cellB=e}static create(e,i){if(this.wallPool.length>0){const t=this.wallPool.pop();return t.cellA=e,t.cellB=i,t}return new t(e,i)}static release(t){this.wallPool.length<this.MAX_POOL_SIZE&&this.wallPool.push(t)}equals(t){return this.cellA===t.cellA&&this.cellB===t.cellB||this.cellA===t.cellB&&this.cellB===t.cellA}toString(){return`Wall(${this.cellA.toString()} - ${this.cellB.toString()})`}};h(o,"wallPool",[]),h(o,"MAX_POOL_SIZE",1e4);let c=o;var d=Object.defineProperty,u=(t,e,i)=>((t,e,i)=>e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class m{constructor(t){u(this,"parent"),u(this,"rank"),this.parent=Array.from({length:t},((t,e)=>e)),this.rank=new Array(t).fill(0)}createSet(t){this.parent[t]=t,this.rank[t]=0}findSet(t){if(t<0||t>=this.parent.length)throw new Error("Element not found in any set");return this.parent[t]!==t&&(this.parent[t]=this.findSet(this.parent[t])),this.parent[t]}mergeSet(t,e){const i=this.findSet(t),s=this.findSet(e);if(i===s)return;const n=this.rank[i],l=this.rank[s];n<l?this.parent[i]=s:n>l?this.parent[s]=i:(this.parent[s]=i,this.rank[i]=n+1)}}var g=Object.defineProperty,f=(t,e,i)=>((t,e,i)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);const w=class t{constructor(t=Date.now()){f(this,"seed"),this.seed=t}nextInt(){return this.seed=(this.seed*t.MULTIPLIER+t.INCREMENT)%t.MODULUS,this.seed}nextIntRange(t,e){return t+this.nextInt()%(e-t+1)}nextDouble(){return this.nextInt()/t.MODULUS}nextDoubleRange(t,e){return t+this.nextDouble()*(e-t)}};f(w,"MULTIPLIER",1664525),f(w,"INCREMENT",1013904223),f(w,"MODULUS",4294967296);let p=w;class S extends Error{constructor(t,e){super(t),this.code=e,this.name="MazeError"}}class v extends S{constructor(t){super(t,"MAZE_GENERATION_ERROR"),this.name="MazeGenerationError"}}class I extends S{constructor(t){super(t,"MAZE_SOLVING_ERROR"),this.name="MazeSolvingError"}}class b extends S{constructor(t){super(t,"INVALID_CONFIG_ERROR"),this.name="InvalidConfigError"}}var E=Object.defineProperty,y=(t,e,i)=>((t,e,i)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class x{static validate(t){this.validateDimensions(t),this.validateCellSize(t),this.validateAnimationSpeed(t)}static validateDimensions(t){if(t.width<this.MIN_DIMENSION||t.width>this.MAX_DIMENSION)throw new b(`Width must be between ${this.MIN_DIMENSION} and ${this.MAX_DIMENSION}`);if(t.height<this.MIN_DIMENSION||t.height>this.MAX_DIMENSION)throw new b(`Height must be between ${this.MIN_DIMENSION} and ${this.MAX_DIMENSION}`)}static validateCellSize(t){if(t.cellSize<this.MIN_CELL_SIZE||t.cellSize>this.MAX_CELL_SIZE)throw new b(`Cell size must be between ${this.MIN_CELL_SIZE} and ${this.MAX_CELL_SIZE}`)}static validateAnimationSpeed(t){if(t.animationSpeed<this.MIN_ANIMATION_SPEED||t.animationSpeed>this.MAX_ANIMATION_SPEED)throw new b(`Animation speed must be between ${this.MIN_ANIMATION_SPEED} and ${this.MAX_ANIMATION_SPEED}`)}}y(x,"MIN_DIMENSION",2),y(x,"MAX_DIMENSION",1e3),y(x,"MIN_CELL_SIZE",4),y(x,"MAX_CELL_SIZE",100),y(x,"MIN_ANIMATION_SPEED",1),y(x,"MAX_ANIMATION_SPEED",1e3);var _=Object.defineProperty,z=(t,e,i)=>((t,e,i)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class N{constructor(t){z(this,"_cells"),z(this,"wallList"),z(this,"sets"),z(this,"startCell",null),z(this,"endCell",null),x.validate(t),this._cells=new Array(t.width*t.height),this.wallList=[],this.sets=new m(t.width*t.height),this.initializeGrid(t)}get cells(){return this._cells}get width(){return this._cells.length>0?Math.sqrt(this._cells.length):0}get height(){return this.width}getCell(t,e){return t<0||t>=this.width||e<0||e>=this.height?null:this._cells[t+e*this.width]}getStartCell(){if(!this.startCell)throw new v("Start cell not set");return this.startCell}getEndCell(){if(!this.endCell)throw new v("End cell not set");return this.endCell}initializeGrid(t){for(let e=0;e<t.height;e++)for(let i=0;i<t.width;i++){const s=new r({x:i,y:e});this._cells[i+e*t.width]=s,this.sets.createSet(i+e*t.width)}for(const e of this._cells)for(let t=0;t<4;t++){const i=e.getNeighborPosition(t),s=this.getCell(i.x,i.y);s&&this.addWall(e,s)}}addWall(t,e){const i=c.create(t,e);this.wallList.some((t=>t.equals(i)))?c.release(i):this.wallList.push(i)}iterate(){if(0===this.wallList.length)return!0;const t=this.wallList.pop(),e=t.cellA.position.x+t.cellA.position.y*this.width,i=t.cellB.position.x+t.cellB.position.y*this.width;return this.sets.findSet(e)!==this.sets.findSet(i)&&(this.sets.mergeSet(e,i),this.removeWallsBetween(t.cellA,t.cellB)),c.release(t),!1}removeWallsBetween(t,e){const{x:i,y:s}=t.position,{x:l,y:r}=e.position;i===l?s<r?(t.removeWall(n.Bottom),e.removeWall(n.Top)):(t.removeWall(n.Top),e.removeWall(n.Bottom)):i<l?(t.removeWall(n.Right),e.removeWall(n.Left)):(t.removeWall(n.Left),e.removeWall(n.Right))}static generate(t){const e=new N(t),i=new p(t.seed||Date.now());for(let s=e.wallList.length-1;s>0;s--){const t=i.nextIntRange(0,s);[e.wallList[s],e.wallList[t]]=[e.wallList[t],e.wallList[s]]}return e.createExitCells(i),e}createExitCells(t){let e=t.nextIntRange(0,3),i=0,s=0;switch(e){case n.Top:i=t.nextIntRange(0,this.width-1),s=0;break;case n.Right:s=t.nextIntRange(0,this.height-1),i=this.width-1;break;case n.Bottom:i=t.nextIntRange(0,this.width-1),s=this.height-1;break;case n.Left:s=t.nextIntRange(0,this.height-1),i=0}switch(this.startCell=this.getCell(i,s),e){case n.Top:i=t.nextIntRange(0,this.width-1),s=this.height-1;break;case n.Right:s=t.nextIntRange(0,this.height-1),i=0;break;case n.Bottom:i=t.nextIntRange(0,this.width-1),s=0;break;case n.Left:s=t.nextIntRange(0,this.height-1),i=this.width-1}this.endCell=this.getCell(i,s)}}var C=Object.defineProperty,M=(t,e,i)=>((t,e,i)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class A{constructor(t){this.maze=t,M(this,"openSet",[]),M(this,"closedSet",new Set),M(this,"startCell"),M(this,"endCell"),M(this,"current",null),M(this,"solutionFound",!1),M(this,"currentPath",[]),this.startCell=t.getStartCell(),this.endCell=t.getEndCell(),this.initialize()}initialize(){const t={cell:this.startCell,parent:null,g:0,h:this.heuristic(this.startCell),f:this.heuristic(this.startCell)};this.openSet.push(t),this.currentPath=[this.startCell.position]}heuristic(t){const{x:e,y:i}=t.position,{x:s,y:n}=this.endCell.position;return Math.abs(e-s)+Math.abs(i-n)}getNeighbors(t){const e=[],{cell:i}=t;for(let s=0;s<4;s++)if(!i.hasWall(s)){const t=i.getNeighborPosition(s),n=this.maze.getCell(t.x,t.y);n&&!this.closedSet.has(n)&&e.push(n)}return e}iterate(){if(this.solutionFound)return!0;if(0===this.openSet.length)throw new I("No solution exists for this maze");if(this.current=this.openSet.reduce(((t,e)=>e.f<t.f?e:t),this.openSet[0]),this.openSet=this.openSet.filter((t=>t!==this.current)),this.closedSet.add(this.current.cell),this.updateCurrentPath(),this.current.cell===this.endCell)return this.solutionFound=!0,!0;for(const t of this.getNeighbors(this.current)){const e=this.current.g+1,i=this.heuristic(t),s=e+i,n=this.openSet.find((e=>e.cell===t));if(!n||e<n.g){const l={cell:t,parent:this.current,g:e,h:i,f:s};n?Object.assign(n,l):this.openSet.push(l)}}return!1}updateCurrentPath(){if(!this.current)return;const t=[];let e=this.current;for(;e;)t.unshift(e.cell.position),e=e.parent;this.currentPath=t}getCurrentPath(){return this.currentPath}getOpenSet(){return this.openSet.map((t=>t.cell.position))}getClosedSet(){return Array.from(this.closedSet).map((t=>t.position))}getSolution(){if(!this.solutionFound||!this.current||this.current.cell!==this.endCell)throw new I("No solution has been found yet");return{path:this.currentPath,start:this.startCell.position,end:this.endCell.position}}}var L=Object.defineProperty,P=(t,e,i)=>((t,e,i)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class O{constructor(t,e){this.canvas=t,this.maze=e,P(this,"ctx"),P(this,"cellSize",0),P(this,"offsetX",0),P(this,"offsetY",0);const i=t.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.ctx=i,this.calculateDimensions()}calculateDimensions(){this.cellSize=Math.min((this.canvas.width-40)/this.maze.width,(this.canvas.height-40)/this.maze.height),this.offsetX=(this.canvas.width-this.maze.width*this.cellSize)/2,this.offsetY=(this.canvas.height-this.maze.height*this.cellSize)/2}render(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawMaze()}renderSolution(t){this.render(),this.drawPath(t.path,"#ff0000",3)}renderSolvingProgress(t,e,i){this.render(),this.drawCells(i,"#cccccc",.5),this.drawCells(e,"#90EE90",.5),this.drawPath(t,"#ff0000",2)}drawMaze(){this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);for(let t=0;t<this.maze.height;t++)for(let e=0;e<this.maze.width;e++){const i=this.maze.getCell(e,t);i&&this.drawCell(i)}this.drawCell(this.maze.getStartCell(),"#00ff00"),this.drawCell(this.maze.getEndCell(),"#ff0000")}drawCell(t,e="#000000"){const{x:i,y:s}=t.position,n=this.offsetX+i*this.cellSize,l=this.offsetY+s*this.cellSize;this.ctx.strokeStyle=e,this.ctx.lineWidth=2,t.hasWall(0)&&(this.ctx.beginPath(),this.ctx.moveTo(n,l),this.ctx.lineTo(n+this.cellSize,l),this.ctx.stroke()),t.hasWall(1)&&(this.ctx.beginPath(),this.ctx.moveTo(n+this.cellSize,l),this.ctx.lineTo(n+this.cellSize,l+this.cellSize),this.ctx.stroke()),t.hasWall(2)&&(this.ctx.beginPath(),this.ctx.moveTo(n,l+this.cellSize),this.ctx.lineTo(n+this.cellSize,l+this.cellSize),this.ctx.stroke()),t.hasWall(3)&&(this.ctx.beginPath(),this.ctx.moveTo(n,l),this.ctx.lineTo(n,l+this.cellSize),this.ctx.stroke())}drawPath(t,e,i){if(t.length<2)return;this.ctx.strokeStyle=e,this.ctx.lineWidth=i,this.ctx.beginPath();const s=t[0];this.ctx.moveTo(this.offsetX+(s.x+.5)*this.cellSize,this.offsetY+(s.y+.5)*this.cellSize);for(let n=1;n<t.length;n++){const e=t[n];this.ctx.lineTo(this.offsetX+(e.x+.5)*this.cellSize,this.offsetY+(e.y+.5)*this.cellSize)}this.ctx.stroke()}drawCells(t,e,i){this.ctx.fillStyle=e,this.ctx.globalAlpha=i;for(const s of t)this.ctx.fillRect(this.offsetX+s.x*this.cellSize,this.offsetY+s.y*this.cellSize,this.cellSize,this.cellSize);this.ctx.globalAlpha=1}}var R=Object.defineProperty,k=(t,e,i)=>((t,e,i)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class D{constructor(t){this.canvas=t,k(this,"maze",null),k(this,"solver",null),k(this,"solution",null),k(this,"renderer",null),k(this,"isGenerating",!1)}generateMaze(t,e,i){this.solver=null,this.solution=null,this.isGenerating=!0;const s={width:t,height:e,seed:i,algorithm:"kruskal",renderer:"webgl",animationSpeed:100,cellSize:20};this.maze=N.generate(s),this.renderer=new O(this.canvas,this.maze)}iterateMaze(){if(this.maze){const t=this.maze.iterate();return this.renderer&&this.renderer.render(),t&&(this.isGenerating=!1),t}return!1}solveMaze(){if(!this.maze)throw new v("Maze not generated");if(this.isGenerating)throw new v("Maze generation not complete");this.solver=new A(this.maze)}iterateSolution(){if(this.solver){const t=this.solver.iterate();return this.renderer&&this.renderer.renderSolvingProgress(this.solver.getCurrentPath(),this.solver.getOpenSet(),this.solver.getClosedSet()),t&&(this.solution=this.solver.getSolution(),this.solution&&this.renderer&&this.renderer.renderSolution(this.solution),this.solver=null),t}return!1}render(){this.renderer&&(this.renderer.render(),this.solution&&this.renderer.renderSolution(this.solution))}}var F=Object.defineProperty,W=(t,e,i)=>((t,e,i)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class T{constructor(){W(this,"worker"),W(this,"animationFrameId",null),W(this,"isGenerating",!1),W(this,"isSolving",!1);const t=document.getElementById("mazeCanvas");if(!t)throw new Error("Canvas element not found");t.width=800,t.height=800,this.worker=new D(t),this.setupEventListeners()}setupEventListeners(){const t=document.getElementById("generate"),e=document.getElementById("solve");t&&t.addEventListener("click",(()=>this.handleGenerate())),e&&e.addEventListener("click",(()=>this.handleSolve()))}handleGenerate(){if(this.isGenerating||this.isSolving)return;const t=parseInt(document.getElementById("width").value),e=parseInt(document.getElementById("height").value),i=parseInt(document.getElementById("seed").value);if(isNaN(t)||isNaN(e)||isNaN(i))alert("Please enter valid numbers for width, height, and seed");else try{this.isGenerating=!0,this.worker.generateMaze(t,e,i),this.animateGeneration()}catch(s){this.isGenerating=!1,alert(s instanceof Error?s.message:"Failed to generate maze")}}handleSolve(){if(!this.isGenerating&&!this.isSolving)try{this.isSolving=!0,this.worker.solveMaze(),this.animateSolution()}catch(t){this.isSolving=!1,t instanceof v?alert(t.message):alert("Failed to solve maze")}}animateGeneration(){try{this.worker.iterateMaze()?(this.isGenerating=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)):this.animationFrameId=requestAnimationFrame((()=>this.animateGeneration()))}catch(t){this.isGenerating=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),alert(t instanceof Error?t.message:"Failed to generate maze")}}animateSolution(){try{this.worker.iterateSolution()?(this.isSolving=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)):this.animationFrameId=requestAnimationFrame((()=>this.animateSolution()))}catch(t){this.isSolving=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),alert(t instanceof Error?t.message:"Failed to solve maze")}}}document.addEventListener("DOMContentLoaded",(()=>{new T}));
//# sourceMappingURL=main-DQEjJHui.js.map
